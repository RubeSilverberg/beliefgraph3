# Belief Graph Tool - AI JSON Format Guide

**For AI Systems**: This guide explains how to create JSON files for belief graph networks. The system supports **minimal format** - you provide only essential data, and the converter handles the rest.

## Two Format Options

### Option 1: Minimal Format (Recommended for AI)
Simple structure with automatic expansion:
```json
{
  "nodes": [
    { "id": "evidence", "label": "Witness testimony" },
    { "id": "conclusion", "label": "Defendant is guilty" }
  ],
  "edges": [
    { "source": "evidence", "target": "conclusion", "type": "supports" }
  ]
}
```

### Option 2: Full Cytoscape Format
Complete structure with all visual properties:
```json
{
  "graph": [
    {
      "data": { "id": "evidence", "label": "Witness testimony" },
      "position": { "x": 100, "y": 200 },
      "group": "nodes"
    },
    {
      "data": { "id": "edge1", "source": "evidence", "target": "conclusion" },
      "group": "edges"
    }
  ]
}
```

**Workflow**: Create minimal format → Load in test converter → Save as full format → Use in main tool

## Minimal Format Specification

### Required Fields

**Nodes (minimum):**
```json
{ "id": "unique_id" }
```

**Nodes (typical):**
```json
{ 
  "id": "unique_id",
  "label": "Display text",
  "type": "fact"
}
```
(`"type"` needed only for `"fact"`, `"and"`, `"or"`, or `"note"`. Omit for normal assertions.)

**Edges (minimum):**
```json
{ "source": "node_id", "target": "node_id" }
```

**Edges (with influence):**
```json
{ 
  "source": "node_id", 
  "target": "node_id", 
  "type": "supports",
  "weight": 0.85
}
```

### Defaults (if omitted)
- Node `"type"`: Assigned by converter as `"fact"` (no incoming edges) or `"assertion"` (otherwise)
- Edge `"type"`: Defaults to `"supports"`
- Edge `"weight"`: If omitted for assertion targets, defaults to `0.15`

### Auto-Generated by Converter
- Unique edge IDs
- Node positions (automatic layout)
- Node types (fact/assertion based on connections)
- Visual styling (colors, sizes, fonts)
- Cytoscape properties (group, position, etc.)
- Any properties not specified in minimal format are auto-generated

### Node Types (Auto-Detection + Manual Override)

1. **Facts**: Nodes with no incoming edges (auto-detected)
2. **Assertions**: Nodes with incoming edges (auto-detected)  
3. **Logic nodes**: Must specify `"type": "and"` or `"type": "or"`
4. **Notes**: Must specify `"type": "note"`

**Rules**:
- If `"type"` is omitted, converter assigns `"fact"` (no incoming edges) or `"assertion"` (has incoming edges)
- `"type"` **must** be specified for `"and"`, `"or"`, or `"note"` nodes
- For edges, `"type"` defaults to `"supports"` if omitted

### Edge Influence System

**Weights** (Lite mode - current converter support):
- `0.15` = Minimal influence
- `0.35` = Small influence  
- `0.60` = Medium influence
- `0.85` = Strong influence
- `1.0` = Maximal influence

**Required**: Edge `weight` must be specified for edges targeting assertion nodes. If omitted, converter assigns default minimal influence (0.15).
## Optional Customizations

**Node styling** (optional):
```json
{
  "id": "custom_node",
  "label": "Important Evidence", 
  "description": "Hover text shown on node",
  "textColor": "#ffffff",
  "sizeIndex": 5,
  "position": { "x": 100, "y": 200 }
}
```

**Edge annotations:**
```json
{
  "source": "A", "target": "B",
  "type": "supports", 
  "weight": 0.6,
  "rationale": "Explanation of this connection"
}
```

## Structure Rules

1. **No cycles**: Must be Directed Acyclic Graph (DAG)
2. **Unique IDs**: All node/edge IDs must be unique
3. **Valid connections**: Source/target must reference existing node IDs
4. **Notes are isolated**: Notes cannot connect to other nodes

## Practical Examples

### Simple Investigation
```json
{
  "nodes": [
    { "id": "witness", "label": "Witness testimony", "type": "fact" },
    { "id": "dna", "label": "DNA evidence", "type": "fact" },
    { "id": "guilt", "label": "Defendant is guilty" }
  ],
  "edges": [
    { "source": "witness", "target": "guilt", "type": "supports", "weight": 0.6 },
    { "source": "dna", "target": "guilt", "type": "supports", "weight": 0.85 }
  ]
}
```

### Logic Operations
```json
{
  "nodes": [
    { "id": "cond1", "label": "Condition A" },
    { "id": "cond2", "label": "Condition B" }, 
    { "id": "both", "label": "Both conditions", "type": "and" },
    { "id": "result", "label": "Final conclusion" }
  ],
  "edges": [
    { "source": "cond1", "target": "both" },
    { "source": "cond2", "target": "both" },
    { "source": "both", "target": "result", "weight": 0.85 }
  ]
}
```

## JSON Creation Workflow

1. **Generate minimal JSON** with nodes and edges
2. **Save as `.json`** file in `/tests/minimal-json/` folder
3. **Open converter**: `/tests/minimal-json/test-minimal-converter.html`
4. **Load your file** - system expands to full format
5. **Export to main tool** - save as complete graph file
6. **Use in main interface** - load the expanded file normally

## Loading Paths

- **Minimal files**: Use `/tests/minimal-json/test-minimal-converter.html`
- **Full files**: Use main interface `/index.html` Load button
- **Examples**: Use main interface Examples button

The converter handles all visual properties, positioning, and format requirements automatically.
